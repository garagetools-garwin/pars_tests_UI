{"uid":"b21b58f25bf7a4f9","name":"test_vseinstrumenti_price[chromium]","fullName":"widgets.test_vi#test_vseinstrumenti_price","historyId":"b1f905f0fe226f9b1f128f843e5db87b","time":{"start":1753714772440,"stop":1753714870435,"duration":97995},"status":"failed","statusMessage":"AssertionError: Найдены запрещённые ссылки (403): ['https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/']\nassert not ['https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/']","statusTrace":"page = <Page url='https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118/'>\nmanual_page_factory = <function manual_page_factory.<locals>.create_manual_page at 0x7fe18729d8a0>\n\n    @pytest.mark.ui\n    def test_vseinstrumenti_price(page: Page, manual_page_factory):\n        # Инициализируем страницу с вашими настройками и куками\n        page = manual_page_factory(role=\"vi_test\")\n    \n        # Устанавливаем дополнительные заголовки\n        page.set_extra_http_headers({\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\",\n            \"Accept-Language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\"\n        })\n    \n        # Список ссылок для проверки\n        urls = [\n            \"https://www.vseinstrumenti.ru/product/stroitelnaya-dvuhkolesnaya-oblegchennaya-tachka-sibrteh-90l-230kg-689643-1213728/\",\n            \"https://www.vseinstrumenti.ru/product/usilennaya-dvuhkolesnaya-stroitelnaya-tachka-denzel-obem-140-l-250-kg-koleso-15x6-00-6-69000-6647941/\",\n            \"https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/\",\n            \"https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/\",\n            \"https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/\",\n            \"https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/\",\n            \"https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/\",\n            \"https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118\"\n        ]\n    \n        status_404 = []\n        status_403 = []\n        other_status = {}\n    \n        for url in urls:\n            try:\n                # Добавляем задержку между запросами (1 секунда)\n                page.wait_for_timeout(1000)\n    \n                response = page.goto(url, timeout=15000, wait_until=\"networkidle\")\n                status_code = response.status\n    \n                if status_code == 404:\n                    status_404.append(url)\n                elif status_code == 403:\n                    status_403.append(url)\n                else:\n                    other_status[url] = status_code\n    \n                # Для отладки: делаем скриншот каждой страницы\n                page.screenshot(path=f\"screenshot_{url.split('/')[-2]}.png\")\n    \n            except Exception as e:\n                other_status[url] = f\"Error: {str(e)}\"\n                # Скриншот при ошибке\n                page.screenshot(path=f\"error_{url.split('/')[-2]}.png\")\n    \n        # Вывод результатов\n        print(\"\\nРезультаты проверки:\")\n        if status_404:\n            print(\"\\nСсылки с 404 ошибкой:\")\n            for url in status_404:\n                print(f\"- {url}\")\n    \n        if status_403:\n            print(\"\\nСсылки с 403 ошибкой:\")\n            for url in status_403:\n                print(f\"- {url}\")\n    \n        if other_status:\n            print(\"\\nОстальные статусы:\")\n            for url, status in other_status.items():\n                print(f\"- {url}: {status}\")\n    \n        # Проверяем, что нет критических ошибок\n        assert not status_404, f\"Найдены битые ссылки (404): {status_404}\"\n>       assert not status_403, f\"Найдены запрещённые ссылки (403): {status_403}\"\nE       AssertionError: Найдены запрещённые ссылки (403): ['https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/']\nE       assert not ['https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/']\n\nwidgets/test_vi.py:240: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"delete_output_dir","time":{"start":1753712458431,"stop":1753712458431,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1753712458431,"stop":1753712458431,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1753712458431,"stop":1753712458431,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1753712458431,"stop":1753712458431,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1753712458432,"stop":1753712458432,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1753712458432,"stop":1753712458746,"duration":314},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1753712458746,"stop":1753712458746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1753712458746,"stop":1753712458746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1753712458746,"stop":1753712458978,"duration":232},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1753712458746,"stop":1753712458746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1753714484448,"stop":1753714484448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1753714484448,"stop":1753714484448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1753714484448,"stop":1753714484448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1753714772407,"stop":1753714772407,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1753714772407,"stop":1753714772407,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1753714772407,"stop":1753714772407,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1753714772407,"stop":1753714772414,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1753714772414,"stop":1753714772439,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"manual_page_factory","time":{"start":1753714772439,"stop":1753714772439,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"new_context::0","time":{"start":1753714870441,"stop":1753714870453,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1753714870453,"stop":1753714870453,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1753714870454,"stop":1753714870455,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1753714870455,"stop":1753714870661,"duration":206},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1753714870663,"stop":1753714870675,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"ui"},{"name":"parentSuite","value":"widgets"},{"name":"suite","value":"test_vi"},{"name":"host","value":"pkrvmpptgkbjq6m"},{"name":"thread","value":"6270-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"widgets.test_vi"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"7eecfcc23fc7b979","status":"failed","statusDetails":"AssertionError: Найдены запрещённые ссылки (403): ['https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/', 'https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/']\nassert not ['https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/', 'https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/']","time":{"start":1753714684490,"stop":1753714769388,"duration":84898}},{"uid":"2f7d17e4cc46b30e","status":"failed","statusDetails":"AssertionError: Найдены запрещённые ссылки (403): ['https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/', 'https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118']\nassert not ['https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/', 'https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118']","time":{"start":1753714570403,"stop":1753714681434,"duration":111031}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["ui"]},"source":"b21b58f25bf7a4f9.json","parameterValues":["'chromium'"]}