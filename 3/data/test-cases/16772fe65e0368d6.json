{"uid":"16772fe65e0368d6","name":"test_vseinstrumenti_price[chromium]","fullName":"tests.test_vi#test_vseinstrumenti_price","historyId":"e897d8d048d6ab092354484e5af5580c","time":{"start":1753708674722,"stop":1753708696970,"duration":22248},"status":"failed","statusMessage":"AssertionError: Найдены запрещённые ссылки (403): ['https://www.vseinstrumenti.ru/product/stroitelnaya-dvuhkolesnaya-oblegchennaya-tachka-sibrteh-90l-230kg-689643-1213728/', 'https://www.vseinstrumenti.ru/product/usilennaya-dvuhkolesnaya-stroitelnaya-tachka-denzel-obem-140-l-250-kg-koleso-15x6-00-6-69000-6647941/', 'https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/', 'https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/', 'https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/', 'https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118']\nassert not ['https://www.vseinstrumenti.ru/product/stroitelnaya-dvuhkolesnaya-oblegchennaya-tachka-sibrteh-90l-230kg-689643-1213728/', 'https://www.vseinstrumenti.ru/product/usilennaya-dvuhkolesnaya-stroitelnaya-tachka-denzel-obem-140-l-250-kg-koleso-15x6-00-6-69000-6647941/', 'https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/', 'https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/', 'https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', ...]","statusTrace":"page = <Page url='https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118'>\nmanual_page_factory = <function manual_page_factory.<locals>.create_manual_page at 0x7fe79f3a6200>\n\n    @pytest.mark.ui\n    def test_vseinstrumenti_price(page: Page, manual_page_factory):\n        # Инициализируем страницу с вашими настройками и куками\n        page = manual_page_factory()\n    \n        # Устанавливаем дополнительные заголовки\n        page.set_extra_http_headers({\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\",\n            \"Accept-Language\": \"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\"\n        })\n    \n        # Список ссылок для проверки\n        urls = [\n            \"https://www.vseinstrumenti.ru/product/stroitelnaya-dvuhkolesnaya-oblegchennaya-tachka-sibrteh-90l-230kg-689643-1213728/\",\n            \"https://www.vseinstrumenti.ru/product/usilennaya-dvuhkolesnaya-stroitelnaya-tachka-denzel-obem-140-l-250-kg-koleso-15x6-00-6-69000-6647941/\",\n            \"https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/\",\n            \"https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/\",\n            \"https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/\",\n            \"https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/\",\n            \"https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/\",\n            \"https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118\"\n        ]\n    \n        status_404 = []\n        status_403 = []\n        other_status = {}\n    \n        for url in urls:\n            try:\n                # Добавляем задержку между запросами (1 секунда)\n                page.wait_for_timeout(1000)\n    \n                response = page.goto(url, timeout=15000, wait_until=\"networkidle\")\n                status_code = response.status\n    \n                if status_code == 404:\n                    status_404.append(url)\n                elif status_code == 403:\n                    status_403.append(url)\n                else:\n                    other_status[url] = status_code\n    \n                # Для отладки: делаем скриншот каждой страницы\n                page.screenshot(path=f\"screenshot_{url.split('/')[-2]}.png\")\n    \n            except Exception as e:\n                other_status[url] = f\"Error: {str(e)}\"\n                # Скриншот при ошибке\n                page.screenshot(path=f\"error_{url.split('/')[-2]}.png\")\n    \n        # Вывод результатов\n        print(\"\\nРезультаты проверки:\")\n        if status_404:\n            print(\"\\nСсылки с 404 ошибкой:\")\n            for url in status_404:\n                print(f\"- {url}\")\n    \n        if status_403:\n            print(\"\\nСсылки с 403 ошибкой:\")\n            for url in status_403:\n                print(f\"- {url}\")\n    \n        if other_status:\n            print(\"\\nОстальные статусы:\")\n            for url, status in other_status.items():\n                print(f\"- {url}: {status}\")\n    \n        # Проверяем, что нет критических ошибок\n        assert not status_404, f\"Найдены битые ссылки (404): {status_404}\"\n>       assert not status_403, f\"Найдены запрещённые ссылки (403): {status_403}\"\nE       AssertionError: Найдены запрещённые ссылки (403): ['https://www.vseinstrumenti.ru/product/stroitelnaya-dvuhkolesnaya-oblegchennaya-tachka-sibrteh-90l-230kg-689643-1213728/', 'https://www.vseinstrumenti.ru/product/usilennaya-dvuhkolesnaya-stroitelnaya-tachka-denzel-obem-140-l-250-kg-koleso-15x6-00-6-69000-6647941/', 'https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/', 'https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/', 'https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', 'https://www.vseinstrumenti.ru/product/nakidnoj-razemnyj-klyuch-dlya-trubok-force-12-mm-75112a-794748/', 'https://www.vseinstrumenti.ru/product/dlinnogubtsy-jonnesway-p118']\nE       assert not ['https://www.vseinstrumenti.ru/product/stroitelnaya-dvuhkolesnaya-oblegchennaya-tachka-sibrteh-90l-230kg-689643-1213728/', 'https://www.vseinstrumenti.ru/product/usilennaya-dvuhkolesnaya-stroitelnaya-tachka-denzel-obem-140-l-250-kg-koleso-15x6-00-6-69000-6647941/', 'https://www.vseinstrumenti.ru/product/stroitelnaya-2-h-kolesnaya-usilennaya-tachka-palisad-gruzopodemnost-320-kg-obem-100-l-68923-1401230/', 'https://www.vseinstrumenti.ru/product/krestovaya-silovaya-otvertka-ph-2-0h38mm-jtc-3466-766726/', 'https://www.vseinstrumenti.ru/product/golovka-tortsevaya-3-4-torx-e24-110-udarnaya-jtc-j606e-e24-747330/', 'https://www.vseinstrumenti.ru/product/kombinirovannyj-korotkij-klyuch-force-14mm-755s14-987989/', ...]\n\ntests/test_vi.py:240: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1753708389173,"stop":1753708389173,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1753708389173,"stop":1753708389174,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1753708389174,"stop":1753708389174,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1753708389174,"stop":1753708389174,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1753708389174,"stop":1753708389479,"duration":305},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1753708389174,"stop":1753708389174,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1753708389479,"stop":1753708389479,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1753708389479,"stop":1753708391565,"duration":2086},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1753708389479,"stop":1753708389479,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1753708389479,"stop":1753708389479,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1753708588760,"stop":1753708588760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1753708588760,"stop":1753708588760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1753708588760,"stop":1753708588760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1753708674691,"stop":1753708674696,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1753708674691,"stop":1753708674691,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1753708674691,"stop":1753708674691,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1753708674691,"stop":1753708674691,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1753708674696,"stop":1753708674721,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"manual_page_factory","time":{"start":1753708674721,"stop":1753708674721,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"new_context::0","time":{"start":1753708696976,"stop":1753708696987,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1753708696987,"stop":1753708696987,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1753708747750,"stop":1753708747750,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1753708747751,"stop":1753708747886,"duration":135},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1753708747888,"stop":1753708747897,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"ui"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_vi"},{"name":"host","value":"pkrvmpptgkbjq6m"},{"name":"thread","value":"6302-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_vi"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["ui"]},"source":"16772fe65e0368d6.json","parameterValues":["'chromium'"]}